@model List<EasyGames.Models.CartItem>
@{
    ViewData["Title"] = "Checkout";
    var total = Model?.Sum(x => x.Price * x.Qty) ?? 0m;
}

<div class="py-5 text-center bg-light rounded-3 mb-4 shadow-sm">
  <h1 class="display-5 fw-bold text-dark m-0">Checkout</h1>
  <p class="text-secondary mb-0">Demo checkout: placing an order will decrement stock and clear your cart.</p>
</div>

@if (Model == null || !Model.Any())
{
  <div class="text-center py-5 bg-white rounded-3 shadow-sm">
    <h2 class="h4 mb-2">No items to checkout</h2>
    <p class="text-muted mb-4">Your cart is empty.</p>
    <a class="btn btn-primary" href="/Catalog">Go to Catalog</a>
  </div>
}
else
{
  <div class="row g-4">
    <div class="col-lg-8">
      <div class="card border-0 shadow-sm">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>Item</th>
                  <th class="text-center" style="width:120px;">Qty</th>
                  <th class="text-end">Line Total</th>
                </tr>
              </thead>
              <tbody>
              @foreach (var c in Model)
              {
                <tr>
                  <td class="fw-medium">@c.Name</td>
                  <td class="text-center">@c.Qty</td>
                  <td class="text-end">@((c.Price * c.Qty).ToString("C"))</td>
                </tr>
              }
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card border-0 shadow-sm summary-card">
        <div class="card-body">
          <h5 class="card-title mb-3">Payment</h5>
          <!-- i keep this as a demo fake form so the UX feels real -->
          <div class="mb-3">
            <label class="form-label">Name on card</label>
            <input class="form-control" placeholder="Alex Smith" />
          </div>
          <div class="mb-3">
            <label class="form-label">Card number</label>
            <input class="form-control" placeholder="•••• •••• •••• ••••" />
          </div>

          <div class="row g-2">
            <div class="col-6">
              <label class="form-label">Expiry</label>
              <input class="form-control" placeholder="MM/YY" />
            </div>
            <div class="col-6">
              <label class="form-label">CVC</label>
              <input class="form-control" placeholder="123" />
            </div>
          </div>

          <hr />
          <div class="d-flex justify-content-between fs-5 fw-semibold">
            <span>Total</span>
            <span>@total.ToString("C")</span>
          </div>

          <form asp-action="PlaceOrder" method="post" class="d-grid mt-3">
            @Html.AntiForgeryToken()
            <button class="btn btn-primary btn-lg">Place Order</button>
          </form>

          <a class="btn btn-outline-secondary w-100 mt-2" asp-controller="Cart" asp-action="Index">Back to Cart</a>
        </div>
      </div>
    </div>
  </div>
}
